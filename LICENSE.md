**مهمة:** لدي كود بايثون يمثل مؤشر "Smart Money Algo Pro E5 – CHADBULL" يقوم بتحديد مناطق العرض والطلب (EXT OB, IDM OB) ورسمها. أرغب في تعديل هذا الكود لإضافة تصنيف قوة المناطق وتحسين المخرجات كما يلي:

1. **تصنيف مناطق الـ Order Block إلى 3 فئات (قوية، محايدة، ضعيفة):**  
   - أضف خاصية أو حقل لكل منطقة OB يحدد فئتها: مهمة/قوية (احتمال ارتداد عالٍ)، محايدة، أو غير مهمة/ضعيفة (احتمال كسر عالٍ).  
   - يتم تحديد التصنيف مباشرة عند إنشاء المنطقة اعتمادًا على عوامل القوة (المذكورة أدناه).

2. **استخدام العوامل التالية لتحديد قوة الـ OB:** عند تحديد التصنيف برمجيًا، اعتمد على:
   - **الاتجاه وهيكل السوق (BOS/CHOCH):** إذا كانت المنطقة في اتجاه الترند الأعلى (مثلاً منطقة طلب في ترند صاعد كبير أو جاءت بعد Break of Structure واضح) ⇒ أقوى. أما إذا كانت عكس الترند العام أو مجرد CHOCH داخلي ⇒ أضعف.  
   - **الفجوة السعرية (FVG):** وجود فجوة سعرية ضمن نطاق المنطقة أو بالقرب منها ⇒ يقوي المنطقة. تحقَّق من أي FVG غير مغطاة مرتبطة بالمنطقة.  
   - **السيولة القريبة:** تحقق من وجود قمم/قيعان بارزة (سيولة) فوق منطقة العرض أو تحت منطقة الطلب مباشرة. إذا وجدت سيولة واضحة جدًا قد تجذب السعر عبر المنطقة ⇒ هذا يضعف قوة المنطقة.  
   - **توقيت الجلسة (Killzones):** ضع في الحسبان وقت وصول السعر للمنطقة أو تكوّنها. على سبيل المثال، المناطق التي تتفاعل خلال افتتاح لندن/نيويورك ⇒ أكثر موثوقية من تلك في جلسة آسيا الهادئة. يمكنك تقريبًا تعريف فترات زمنية للهامة (مثلاً لندن 7-10 GMT، نيويورك 13-16 GMT) واختبار توقيت آخر شمعة لمسَت المنطقة.  
   - **اختبار المنطقة مسبقًا:** إن كانت المنطقة **جديدة** (لم يعد السعر إليها منذ إنشائها) ⇒ أقوى. وإن كانت **مختبرة** (تمت إعادة الاختبار مرة أو أكثر) ⇒ أضعف. استخدم بيانات المؤشر الموجودة (مثل عدّاد حالات "new"/"touched") إن وجدت، أو أضف تتبعًا لحالة ملامسة كل منطقة.

   اجمع هذه العوامل لتحديد التصنيف: يمكن استخدام نظام نقاط أو شروط ثابتة. الهدف أن يتم تصنيف معظم المناطق تلقائيًا بشكل منطقي (لا مشكلة إذا احتاجت بعض المعايرة لاحقًا).

3. **تمييز المناطق حسب التصنيف في المخرجات:**  
   - غيّر لون أو شكل عرض المنطقة بناءً على قوتها. على سبيل المثال: منطقة قوية/مهمة تظلل بلون صارخ (أخضر غامق للطلب القوي، أحمر غامق للعرض القوي) مع علامة نجمة "★" في عنوانها، منطقة محايدة بلون قياسي، منطقة ضعيفة بلون باهت جدًا أو رمادي.  
   - في حالة التقرير النصي، أضف وسمًا بجوار اسم المنطقة مثل "[Strong]" أو "[ضعيفة]"، أو لون النص باستخدام ANSI للألوان (إن كان الإخراج طرفي). في حالة الرسم البياني، استخدم إعدادات ألوان مختلفة (يمكن إضافة متغيرات ألوان جديدة أو تعديل الحالية).  
   - تأكد أن التصنيفات التاريخية (Hist OB) تأخذ لونًا/رمزًا مميزًا أيضًا إذا كانت قوية أو ضعيفة (مثلاً تمييز المنطقة التاريخية القوية بشكل مختلف عن التاريخية العادية).

4. **إضافة تنبيهات وإشارات تداول تلقائية:**  
   - أضف منطقًا للتحقق المستمر: **عندما يلامس السعر الحالي منطقة طلب قوية** ⇒ توليد تنبيه شراء (Buy Signal) فوري. **عندما يلامس السعر منطقة عرض قوية** ⇒ توليد تنبيه بيع (Sell Signal). استخدم نفس أسلوب التنبيهات الموجود في الكود (مثلاً إضافة نص للتنبيه في هيكل `runtime.alerts` أو طباعة رسالة).  
   - صيغة التنبيه المقترحة (بالعربية أو الإنجليزية): "*إشارة شراء من منطقة طلب قوية عند سعر ...*" / "*إشارة بيع من منطقة عرض قوية عند ...*". ضمّن نوع الـOB (عرض/طلب) والسعر التقريبي.  
   - أضف خيار (متغير إعداد) لتعطيل/تمكين التنبيهات للمناطق المحايدة أو جميع المناطق. افتراضيًا: التنبيهات للمناطق القوية فقط، المحايدة معطّلة إلا إذا اختار المستخدم. الضعيفة لا تنبيه لها عادةً.  
   - تأكد أن التنبيه لا يتكرر بشكل زائد: يمكن وضع شرط ألا يصدر نفس التنبيه على نفس المنطقة إلا مرة واحدة (إلا بعد تشكّل منطقة جديدة أو تحرك السعر بعيدًا ثم عودة جديدة).

**ملاحظات إضافية:**  
- حافظ على هيكل الكود وتنظيمه؛ أدرج التعديلات ضمن الأماكن المناسبة (مثلاً بعد حساب الـOB أو ضمن حلقة التحديث المستمر).  
- أضف تعليقات توضح أقسام الكود الجديدة (خاصّة التصنيف والتنبيهات) لسهولة فهم المنطق.  
- اختبر على بضعة أمثلة بعد التعديل للتأكد أن التصنيفات تظهر وأن التنبيهات تعمل كما هو متوقع (يمكن استخدام بيانات تاريخية من Binance للتجربة).

المرجو تنفيذ هذه التعديلات بدقة لضمان توافق المخرجات مع المطلوب وتحسين فاعلية المؤشر.**
